"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**
 * @preserve
 * ValidateManager: A JavaScript form validator
 * Version: 1.0.6
 * Author: Hassan Hibbert <http://hassanhibbert.com/>
 * Github: https://github.com/hassanhibbert/validate-manager
 * Copyright 2016-2017 Hassan Hibbert, under the MIT License
 */
!function(){function e(e){var t=Object.create(c),r={onSubmitHandler:null,onChangeHandler:null,formElement:null,validateOnChange:!0,resetFormOnSubmit:!0};return t.errorMessages={lettersOnly:"Please use letters only.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",range:"Please enter a number between {0} and {1}",required:"This field is required.",minlength:"Please enter a minimum of {0} characters.",maxlength:"Please enter a maximum of {0} characters."},t.form={validationList:[],errorCollection:[]},t.boundOnChangeHandler=t.onChangeHandler.bind(t),t.boundOnSubmitHandler=t.onSubmitHandler.bind(t),t.isObject(e)&&(t.options=Object.assign(r,e),t.options.formName=t.options.formElement,t.options.formElement=o.forms[t.options.formElement]),t}!function(e){function t(e){return e&&"object"==(void 0===e?"undefined":_typeof(e))&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function r(e){return Array.isArray(e)?[]:{}}function n(e,n){return n&&!0===n.clone&&t(e)?a(r(e),e,n):e}function o(e,r,o){var i=e.slice();return r.forEach(function(r,s){void 0===i[s]?i[s]=n(r,o):t(r)?i[s]=a(e[s],r,o):-1===e.indexOf(r)&&i.push(n(r,o))}),i}function i(e,r,o){var i={};return t(e)&&Object.keys(e).forEach(function(t){i[t]=n(e[t],o)}),Object.keys(r).forEach(function(s){i[s]=t(r[s])&&e[s]?a(e[s],r[s],o):n(r[s],o)}),i}function a(e,t,r){var a=Array.isArray(t),s=r||{arrayMerge:o},l=s.arrayMerge||o;return a?Array.isArray(e)?l(e,t,r):n(t,r):i(e,t,r)}a.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw Error("first argument should be an array with at least two elements");return e.reduce(function(e,r){return a(e,r,t)})},e.deepmerge=e.deepmerge||a}(window),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.ValidateManager=e):"undefined"!=typeof window&&(window.ValidateManager=e);var t=Object.prototype,r=t.toString,n=t.hasOwnProperty,o=document,i=function(e,t){return Object.assign(Object.create(e),t)},a={insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},html:function(e,t){e.innerHTML=t},removeNode:function(e){e.parentNode.removeChild(e)},exists:function(e){return o.querySelectorAll(e).length>0},isBoolean:function(e){return"[object Boolean]"===r.call(e)},isNodeList:function(e){return"[object RadioNodeList]"===r.call(e)},isObject:function(e){return"[object Object]"===r.call(e)},isFunction:function(e){return"[object Function]"===r.call(e)},isString:function(e){return"[object String]"===r.call(e)},getCheckedValues:function(e){return[].concat(_toConsumableArray(e)).filter(function(e){return e.checked}).map(function(e){return e.value})},first:function(e){return e.length>0?e[0]:e},flatten:function(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))},removeClass:function(e,t){if(-1!=e.className.indexOf(t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ").trim()}},addClass:function(e,t){-1===e.className.indexOf(t)&&(""!=e.className&&(t=" "+t),e.className+=t)},getValidationRulesFromDOM:function(e){var t=this;return[].concat(_toConsumableArray(e)).reduce(function(e,r){var o=t.parseAttributes(r);return Object.keys(o).length&&(n.call(e,r.name)||(e[r.name]=o,e[r.name].fieldName=r.name)),e},{})},camelCase:function(e,t){return e.indexOf(t)<0?e:e.split(t).reduce(function(e,t,r){var t=r>0?t.charAt(0).toUpperCase()+t.slice(1):t;return e.push(t),e},[]).join("")},parseAttributes:function(e){var t=this;return[].concat(_toConsumableArray(e.attributes)).reduce(function(e,r){if(r.name.indexOf("data-vm-")>=0){var n=r.name.replace("data-vm-",""),o=t.camelCase(n,"-"),i=r.value.indexOf("'")>=0?r.value.replace(/[\/']/g,'"'):r.value;try{var a=JSON.parse(i)}catch(e){var a=i}"required"===o?e[o]=a:e.rules?e.rules[o]=a:(e.rules={},e.rules[o]=a)}return e},{})},formatStringTemplate:function(){for(var e=this,t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/{(.*?)}/g,function(t,n){return Array.isArray(r[n])&&(r=e.flatten(r)),r[n]})},mergeRules:function(e,t){var r=deepmerge(t,e);return Object.keys(r).map(function(e){return r[e]})}},s=i(a,{required:function(e){return this.isNodeList(e)?[].concat(_toConsumableArray(e)).some(function(e){return e.checked}):!(0===e.length||""===e.trim()||null===e)},range:function(e,t){return parseInt(e)>=t[0]&&parseInt(e)<=t[1]},digits:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},lettersOnly:function(e){return/^[a-z]+$/i.test(e)},maxlength:function(e,t){return this.isNodeList(e)?this.getCheckedValues(e).length<=t:e.length<=t},minlength:function(e,t){return this.isNodeList(e)?this.getCheckedValues(e).length>=t:e.length>=t},equalTo:function(e,t,r){if(r[t]){return e===r[t].value}throw new Error('Could not find a form element with the name "'+t+'"')},email:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}}),l=i(s,{isItemInErrorCollection:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.form.errorCollection.filter(function(n){return r?n.id===t.id&&e===n.rule:n.id===t.id}).length>0},isErrorCollectionEmpty:function(){return 0===this.form.errorCollection.length},addToErrorCollection:function(e,t){this.isItemInErrorCollection(e,t)||this.form.errorCollection.push({id:t.id,rule:e,message:t.error[e]})},removeFromErrorCollection:function(e,t){this.isItemInErrorCollection(e,t)&&(this.form.errorCollection=this.form.errorCollection.filter(function(r){return t.id!==r.id&&e!==r.rule}))}}),u=i(l,{init:function(){this.options.validateOnChange&&this.options.formElement.addEventListener("change",this.boundOnChangeHandler,!1),this.options.formElement&&this.options.formElement.addEventListener("submit",this.boundOnSubmitHandler,!1)},destroy:function(){this.options.validateOnChange&&this.options.formElement.removeEventListener("change",this.boundOnChangeHandler,!1),this.options.formElement&&this.options.formElement.removeEventListener("submit",this.boundOnSubmitHandler,!1)},onSubmitHandler:function(e){var t=this;e.preventDefault(),this.validateRequiredFields(function(r){t.isFunction(t.options.onSubmitHandler)?t.options.onSubmitHandler(e,r,t.options.formElement):t.options.formElement.submit(),t.options.resetFormOnSubmit&&t.options.formElement.reset()})},onChangeHandler:function(e){e.preventDefault(),this.validateField(e.target),this.isFunction(this.options.onChangeHandler)&&this.options.onChangeHandler(e,e.target,this.options.formElement)},validateField:function(e){var t=this,r=this.form.validationList.filter(function(r){var n=t.isNodeList(e)?t.first(e).name:e.name;return r.fieldName===n});r=this.first(r),Object.keys(r.rules).some(function(e){var n=t[e].bind(t),o=t.isNodeList(r.element)?r.element:r.element.value,i=r.rules[e];if(!t.isFunction(n))throw new Error('"'+e+'" is not a valid rule.');var a=r.rules[e]&&n(o,i,t.options.formElement);return a?t.removeFromErrorCollection(e,r):t.addToErrorCollection(e,r),t.isItemInErrorCollection(e,r)?t.showError(r.id,r.error[e]):t.isItemInErrorCollection(e,r,!1)||t.hideError(r.id),!a})},buildErrorPlaceholders:function(){var e=this;this.form.validationList.forEach(function(t){var r=o.createElement("div"),n=t.element;if(r.className="error-message",r.id="error-mgn-"+t.id,e.isNodeList(n)){n[n.length-1].parentNode.appendChild(r)}else t.element.parentNode.appendChild(r)})},updateList:function(e){var t=this;return e.map(function(e,r){Object.assign(e,{id:r+"-"+t.options.formName,element:t.options.formElement[e.fieldName]});var o=n.call(e,"rules"),i=n.call(e,"required");o||(e.rules={}),i&&Object.assign(e.rules,{required:e.required});var a=Object.keys(e.rules);return e.error={},a.forEach(function(r){var o=n.call(e.error,r),i=e.rules[r],a=t.isBoolean(i);o||(e.error[r]=a?t.errorMessages[r]:t.formatStringTemplate(t.errorMessages[r],i)),n.call(e,"message")&&e.message[r]&&(e.error[r]=a?e.message[r]:t.formatStringTemplate(e.message[r],i))}),delete e.message,delete e.required,e})},showError:function(e,t){var r=o.querySelector("#error-mgn-"+e);this.html(r,t),this.addClass(r,"error-message_show")},hideError:function(e){var t=o.querySelector("#error-mgn-"+e);this.removeClass(t,"error-message_show")},getAllValues:function(){var e=this;return this.form.validationList.reduce(function(t,r){return t[r.fieldName]=e.isNodeList(r.element)?e.getCheckedValues(r.element):r.element.value,t},{})},getRequiredFields:function(){return this.form.validationList.filter(function(e){return n.call(e.rules,"required")}).map(function(e){return e.element})},validateRequiredFields:function(e){var t=this;this.getRequiredFields().forEach(function(e){t.validateField(e)}),this.isErrorCollectionEmpty()&&this.isFunction(e)&&e(this.getAllValues())}}),c=i(u,{validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.options.formElement)throw new Error('Could not find a form element with the name "'+this.options.formName+'"');var t=this.getValidationRulesFromDOM(this.options.formElement),r=this.mergeRules(e,t);this.form.validationList=this.updateList(r),this.buildErrorPlaceholders(),this.init()},addMethod:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&n.call(this,e))throw new Error("Method '"+e+"' is already use.");this[e]=t,this.errorMessages[e]=r}})}();