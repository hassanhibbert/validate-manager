"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};/**
 * @preserve
 * ValidateManager: A JavaScript form validator
 * Version: 1.0.12
 * Author: Hassan Hibbert <http://hassanhibbert.com/>
 * Github: https://github.com/hassanhibbert/validate-manager
 * Copyright 2016-2017 Hassan Hibbert, under the MIT License
 */
!function(){function e(){var e=Object.create(m),t={onSubmitHandler:null,onChangeHandler:null,formName:null,validateOnChange:!0,resetFormOnSubmit:!0,debug:!1};e.errorMessages={lettersOnly:"Please use letters only.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",range:"Please enter a number between {0} and {1}",required:"This field is required.",minlength:"Please enter a minimum of {0} characters.",maxlength:"Please enter a maximum of {0} characters."},e.form={validationList:[],errorCollection:[]},e.eventHandlers={onChange:e.onChangeHandler.bind(e),onSubmit:e.onSubmitHandler.bind(e)};for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=e.parseArguments(i);if(e.options=r(t,s),e.options.formElement=a.forms[e.options.formName],!e.options.formElement)throw new Error("ValidateManager(): Could not find a form element.");return e}!function(e){function r(e){var r=e&&"object"==("undefined"==typeof e?"undefined":_typeof(e));return r&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function n(e){return Array.isArray(e)?[]:{}}function i(e,t){var i=t&&t.clone===!0;return i&&r(e)?s(n(e),e,t):e}function o(e,t,n){var o=e.slice();return t.forEach(function(t,a){void 0===o[a]?o[a]=i(t,n):r(t)?o[a]=s(e[a],t,n):-1===e.indexOf(t)&&o.push(i(t,n))}),o}function a(e,n,o){var a={};return r(e)&&t(e).forEach(function(r){a[r]=i(e[r],o)}),t(n).forEach(function(t){a[t]=r(n[t])&&e[t]?s(e[t],n[t],o):i(n[t],o)}),a}function s(e,r,t){var n=Array.isArray(r),s=t||{arrayMerge:o},l=s.arrayMerge||o;return n?Array.isArray(e)?l(e,r,t):i(r,t):a(e,r,t)}s.all=function(e,r){if(!Array.isArray(e)||e.length<2)throw Error("first argument should be an array with at least two elements");return e.reduce(function(e,t){return s(e,t,r)})},e.deepmerge=e.deepmerge||s}(window),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.ValidateManager=e):"undefined"!=typeof window&&(window.ValidateManager=e);var r=Object.assign,t=Object.keys,n=Object.prototype,i=n.toString,o=n.hasOwnProperty,a=document,s=function(e,t){return r(Object.create(e),t)},l={html:function(e,r){e.innerHTML=r},isBoolean:function(e){return"[object Boolean]"===i.call(e)},isNodeList:function(e){return"[object RadioNodeList]"===i.call(e)},isObject:function(e){return"[object Object]"===i.call(e)},isFunction:function(e){return"[object Function]"===i.call(e)},isString:function(e){return"[object String]"===i.call(e)},getCheckedValues:function(e){return[].concat(_toConsumableArray(e)).filter(function(e){return e.checked}).map(function(e){return e.value})},first:function(e){return e.length>0?e[0]:e},flatten:function(e){var r;return(r=[]).concat.apply(r,_toConsumableArray(e))},removeClass:function(e,r){if(e.className.indexOf(r)!=-1){var t=new RegExp("(\\s|^)"+r+"(\\s|$)");e.className=e.className.replace(t," ").trim()}},addClass:function(e,r){e.className.indexOf(r)===-1&&(""!=e.className&&(r=" "+r),e.className+=r)},parseArguments:function(e){var t={};if(0===e.length)throw new Error("ValidateManager(): Form name or config object is required.");if(1===e.length){var n=e[0];if(this.isString(n))t.formName=n;else{if(!this.isObject(n))throw new Error("ValidateManager(): First argument is not a valid string or object.");r(t,n)}}else if(2===e.length){var i=e[0],o=e[1];if(!this.isString(i))throw new Error("ValidateManager(): First argument should be a string.");if(!this.isObject(o))throw new Error("ValidateManager(): Second argument should be an object.");o.formName=i,r(t,o)}return t},getValidationRulesFromDOM:function(e){var r=this;return[].concat(_toConsumableArray(e)).reduce(function(e,n){var i=r.parseAttributes(n),a=t(i).length;return a&&(o.call(e,n.name)||(e[n.name]=i,e[n.name].fieldName=n.name)),e},{})},camelCase:function(e,r){if(e.indexOf(r)<0)return e;var t=e.split(r);return t.reduce(function(e,r,t){var r=t>0?r.charAt(0).toUpperCase()+r.slice(1):r;return e.push(r),e},[]).join("")},parseAttributes:function(e){var r=this,t="data-vm-";return[].concat(_toConsumableArray(e.attributes)).reduce(function(e,n){if(n.name.indexOf(t)>=0){var i=n.name.replace(t,""),o=r.camelCase(i,"-"),a=n.value.indexOf("'")>=0,s=a?n.value.replace(/[\/']/g,'"'):n.value;try{var l=JSON.parse(s)}catch(e){var l=s}"required"===o?e[o]=l:e.rules?e.rules[o]=l:(e.rules={},e.rules[o]=l)}return e},{})},formatStringTemplate:function(){for(var e=this,r=arguments.length,t=Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];var i=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return i.replace(/{(.*?)}/g,function(r,n){return Array.isArray(t[n])&&(t=e.flatten(t)),t[n]})},mergeRules:function(e,r){var n=deepmerge(r,e),i=t(n);return i.map(function(e){return n[e]})}},u=s(l,{required:function(e){return this.isNodeList(e)?[].concat(_toConsumableArray(e)).some(function(e){return e.checked}):!(0===e.length||""===e.trim()||null===e)},range:function(e,r){return parseInt(e)>=r[0]&&parseInt(e)<=r[1]},digits:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},lettersOnly:function(e){return/^[a-z]+$/i.test(e)},maxlength:function(e,r){return this.isNodeList(e)?this.getCheckedValues(e).length<=r:e.length<=r},minlength:function(e,r){return this.isNodeList(e)?this.getCheckedValues(e).length>=r:e.length>=r},equalTo:function(e,r,t){if(t[r]){var n=t[r];return e===n.value}throw new Error('equalTo(): Could not find a form element with the name "'+r+'"')},email:function(e){var r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(e)}}),c=s(u,{isItemInErrorCollection:function(e,r){var t=arguments.length<=2||void 0===arguments[2]||arguments[2],n=this.form.errorCollection.filter(function(n){return t?n.id===r.id&&e===n.rule:n.id===r.id});return n.length>0},isErrorCollectionEmpty:function(){return 0===this.form.errorCollection.length},addToErrorCollection:function(e,r){this.isItemInErrorCollection(e,r)||this.form.errorCollection.push({id:r.id,rule:e,message:r.error[e]})},removeFromErrorCollection:function(e,r){this.isItemInErrorCollection(e,r)&&(this.form.errorCollection=this.form.errorCollection.filter(function(t){return r.id!==t.id&&e!==t.rule}))}}),d=s(c,{init:function(){this.options.validateOnChange&&this.options.formElement.addEventListener("change",this.eventHandlers.onChange,!1),this.options.formElement&&this.options.formElement.addEventListener("submit",this.eventHandlers.onSubmit,!1)},destroy:function(){this.options.validateOnChange&&this.options.formElement.removeEventListener("change",this.eventHandlers.onChange,!1),this.options.formElement&&this.options.formElement.removeEventListener("submit",this.eventHandlers.onSubmit,!1)},onSubmitHandler:function(e){var r=this;e.preventDefault(),this.validateRequiredFields(function(t){r.isFunction(r.options.onSubmitHandler)?r.options.onSubmitHandler(e,t,r.options.formElement):r.options.debug||r.options.formElement.submit(),r.options.resetFormOnSubmit&&r.options.formElement.reset()})},onChangeHandler:function(e){e.preventDefault(),this.validateField(e.target),this.isFunction(this.options.onChangeHandler)&&this.options.onChangeHandler(e,e.target,this.options.formElement)},validateField:function(e){var r=this,n=this.form.validationList.filter(function(t){var n=r.isNodeList(e)?r.first(e).name:e.name;return t.fieldName===n});n=this.first(n);var i=t(n.rules);i.some(function(e){var t=r[e].bind(r),i=r.isNodeList(n.element)?n.element:n.element.value,o=n.rules[e],a=n.rules[e]&&t(i,o,r.options.formElement);return a?r.removeFromErrorCollection(e,n):r.addToErrorCollection(e,n),r.isItemInErrorCollection(e,n)?r.showError(n.id,n.error[e]):r.isItemInErrorCollection(e,n,!1)||r.hideError(n.id),!a})},buildErrorPlaceholders:function(){var e=this;this.form.validationList.forEach(function(r){var t=a.createElement("div"),n=r.element;if(t.className="error-message",t.id="error-mgn-"+r.id,e.isNodeList(n)){var i=n[n.length-1];i.parentNode.appendChild(t)}else r.element.parentNode.appendChild(t)})},updateList:function(e){var n=this;return e.map(function(e,i){r(e,{id:i+"-"+n.options.formName,element:n.options.formElement[e.fieldName]});var a=o.call(e,"rules"),s=o.call(e,"required");a||(e.rules={}),s&&r(e.rules,{required:e.required});var l=t(e.rules);return e.error={},l.forEach(function(r){var t=o.call(e.error,r),i=e.rules[r],a=n.isBoolean(i);t||(e.error[r]=a?n.errorMessages[r]:n.formatStringTemplate(n.errorMessages[r],i)),o.call(e,"message")&&e.message[r]&&(e.error[r]=a?e.message[r]:n.formatStringTemplate(e.message[r],i))}),delete e.message,delete e.required,e})},showError:function(e,r){var t=a.querySelector("#error-mgn-"+e);this.html(t,r),this.addClass(t,"error-message_show")},hideError:function(e){var r=a.querySelector("#error-mgn-"+e);this.removeClass(r,"error-message_show")},getAllValues:function(){var e=this;return this.form.validationList.reduce(function(r,t){return r[t.fieldName]=e.isNodeList(t.element)?e.getCheckedValues(t.element):t.element.value,r},{})},getRequiredFields:function(){return this.form.validationList.filter(function(e){return o.call(e.rules,"required")}).map(function(e){return e.element})},validateRequiredFields:function(e){var r=this;this.getRequiredFields().forEach(function(e){r.validateField(e)}),this.isErrorCollectionEmpty()&&this.isFunction(e)&&e(this.getAllValues())}}),m=s(d,{validate:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.isObject(e))throw new Error("validate(): The argument passed to this method must be an object.");var r=this.getValidationRulesFromDOM(this.options.formElement),t=this.mergeRules(e,r);this.form.validationList=this.updateList(t),this.buildErrorPlaceholders(),this.init()},addMethod:function(e,r){var t=arguments.length<=2||void 0===arguments[2]?"":arguments[2];if(o.call(this,e))throw new Error('addMethod(): "'+e+'" method name is already use.');if(!this.isFunction(r))throw new Error("addMethod(): Second argument should be a function.");if(!this.isString(t))throw new Error("addMethod(): Third argument should be a string.");this[e]=r,this.errorMessages[e]=t}})}();