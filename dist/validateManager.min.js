"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}var validateManager=function(e){function n(e){if(!C.isObject(e))throw"Please provide a valid object with config options to validateManager";I=C.extend(k,e)}function r(){I.formElement=document.forms[I.formElement];for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];M.validateObjects=t(n),j(M.validateObjects),i()}function t(e){var n=[d,f,c,s];return n.forEach(function(n){n(e)}),e}function i(){I.validateOnChange&&I.formElement.addEventListener("change",o,!1),I.formElement.addEventListener("submit",u,!1)}function o(e){e.preventDefault(),y(e.target)}function u(e){e.preventDefault();var n=O(M.validateObjects),r=E(n),t=0===M.errorQueue.length,i=r.length===n.length;if(i&&t){var o=a(M.validateObjects);C.isFunction(I.onSuccess)&&I.onSuccess(o),I.resetFormOnSubmit&&I.formElement.reset(),!I.preventSubmit&&I.formElement.submit()}else v(n)}function a(e){var n;return e.reduce(function(e,r){return n=r.input.name||r.input[0].name,e[n]=r.input.value,e},{})}function c(e){var n,r;e.forEach(function(e){n=e.hasOwnProperty("rules"),r=e.hasOwnProperty("required")&&e.required,n&&r?C.extend(e.rules,{required:!0}):!n&&r&&C.extend(e,{rules:{required:!0}})})}function l(e){for(var n=arguments.length,r=Array(n>1?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return e.replace(/{(.*?)}/g,function(e,n){return r[n]})}function s(e){e.forEach(function(e){var n=Object.keys(e.rules);e.error=e.error||{},n.forEach(function(n){!e.error.hasOwnProperty(n)&&C.isBoolean(e.rules[n])?e.error[n]={isValid:null,message:B[n]}:e.error.hasOwnProperty(n)||(e.error[n]={isValid:null,message:l(B[n],e.rules[n])}),e.hasOwnProperty("message")&&(e.error[n].message=e.message[n])}),delete e.message})}function f(e){e.forEach(function(e){C.extend(e,{input:I.formElement[e.input]})})}function d(e){e.forEach(function(e,n){C.extend(e,{id:n})})}function m(e,n,r){Q.hasOwnProperty(e)?console.warn("Method '"+e+"' has already been defined."):(Q[e]=n,B[e]=r?r:"")}function v(e){e.forEach(function(e){y(e.input)})}function h(e){var n=e;return{add:function(e){M[n].push(e)},remove:function(r){M[e]=M[n].filter(function(e){return e.id!==r.id})},isItemInQueue:function(e){var r=M[n].filter(function(n){return n.id===e.id});return 1===r.length}}}function g(e,n){var r=document.querySelector("#error-mgn-"+e);C.html(r,n),r.style.display="block"}function p(e){var n=document.querySelector("#error-mgn-"+e);n.style.display="none"}function y(e){var n,r=b(e.name)[0],t=r.rules,i=h("errorQueue");n=Object.keys(t),n.forEach(function(n){var o,u=C.isBoolean(t[n]),a=u?null:t[n],c="radio"===n?r.input:e.value;if(!C.isFunction(Q[n]))throw' "'+n+'" is not a valid rule.';if(o=Q[n],t[n]&&o(c,a,I.formElement)){r.error[n].isValid=!0;var l=r.error,s=Object.keys(l).map(function(e){return l[e].isValid}),f=0===s.filter(function(e){return!e}).length;i.isItemInQueue(r)&&f&&(i.remove(r),p(r.id))}else r.error[n].isValid=!1,i.isItemInQueue(r)?g(r.id,r.error[n].message):(i.add(r),g(r.id,r.error[n].message))})}function b(e){return M.validateObjects.filter(function(n){return C.isRadioList(n.input)?n.input[0].name===e:n.input.name===e})}function O(e){return e.filter(function(e){return e.required})}function E(e){return e.filter(function(e){return Q.required(e.input.value)})}function j(e){var n,r,t;e.forEach(function(e){t={type:"div",attr:{class:"error-message",id:"error-mgn-"+e.id,style:"display:none"}},n=C.createNode(t),e.rules&&e.rules.radio?(r=[].concat(_toConsumableArray(e.input)).reverse()[0],C.insertAfter(n,r)):C.insertAfter(n,e.input)})}function A(e){return!(0===e.length||""==e.trim()||null==e)}function P(e){return!isNaN(parseFloat(e))&&isFinite(e)}function q(e){return/^[a-z]+$/i.test(e)}function S(e,n){return e.length<=n}function x(e,n){return e.length>=n}function w(e,n,r){var t=r[n];return e===t.value}function L(e){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)}function N(e){for(var n=0;n<e.length;++n)if(e[n].checked)return!0;return!1}function F(){var e={},n=Object.prototype,r=n.toString;return e.insertAfter=function(e,n){n.parentNode.insertBefore(e,n.nextSibling)},e.html=function(e,n){e.innerHTML=n},e.removeNode=function(e){e.parentNode.removeChild(e)},e.exists=function(e){return document.querySelectorAll(e).length>0},e.isBoolean=function(e){return"[object Boolean]"===r.call(e)},e.isRadioList=function(e){return"[object RadioNodeList]"===r.call(e)},e.isObject=function(e){return"[object Object]"===r.call(e)},e.isFunction=function(e){return"[object Function]"===r.call(e)},e.isString=function(e){return"[object String]"===r.call(e)},e.createNode=function(e){var n=e.type,r=e.attr,t=e.content,i=document.createElement(n);return r&&Object.keys(r).forEach(function(e){i.setAttribute(e,r[e])}),t&&t.forEach(function(e){"string"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(e)}),i},e.extend=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e},e}var C=F(),k={onSuccess:null,formElement:null,preventSubmit:!1,validateOnChange:!0,resetFormOnSubmit:!0},I={},Q={radio:N,email:L,digits:P,equalTo:w,lettersOnly:q,required:A,maxLength:S,minLength:x},B={lettersOnly:"Please use letters only.",radio:"Please select an option.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",required:"This field is required.",minLength:"Please enter a minimum of {0} characters.",maxLength:"Please enter a maximum of {0} characters."},M={validateObjects:null,errorQueue:[]},T={validate:r,addMethod:m};return n(e),T};