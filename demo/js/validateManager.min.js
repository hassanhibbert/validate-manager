"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var validateManager=function(e){function n(e){if(!w.isObject(e))throw"Please provide a valid object with config options to validateManager";F=w.extend(V,e)}function t(){F.formElement=document.forms[F.formElement];for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];B.validateObjects=r(n),N(B.validateObjects),i()}function r(e){var n=[d,f,c,l];return n.forEach(function(n){n(e)}),e}function i(){F.validateOnChange&&F.formElement.addEventListener("change",o,!1),F.formElement.addEventListener("submit",u,!1)}function o(e){e.preventDefault(),b(e.target)}function u(e){e.preventDefault();var n=E(B.validateObjects),t=j(n),r=0===B.errorQueue.length,i=t.length===n.length;if(i&&r){var o=a(B.validateObjects);w.isFunction(F.onSuccess)&&F.onSuccess(o),F.resetFormOnSubmit&&F.formElement.reset(),!F.preventSubmit&&F.formElement.submit()}else h(n)}function a(e){var n,t;return e.reduce(function(e,r){if(n=r.input.name||r.input[0].name,w.isNodeList(r.input)){var i=w.getCheckedValues(r.input);t=i.length>1?i:i[0]}else t=r.input.value;return e[n]=t,e},{})}function c(e){var n,t;e.forEach(function(e){n=e.hasOwnProperty("rules"),t=e.hasOwnProperty("required")&&e.required,n&&t?w.extend(e.rules,{required:!0}):!n&&t&&w.extend(e,{rules:{required:!0}})})}function s(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.replace(/{(.*?)}/g,function(e,n){return t[n]})}function l(e){e.forEach(function(e){var n=Object.keys(e.rules);e.error=e.error||{},n.forEach(function(n){if(!e.error.hasOwnProperty(n)&&w.isBoolean(e.rules[n])?e.error[n]={isValid:null,message:Q[n]}:e.error.hasOwnProperty(n)||(e.error[n]={isValid:null,message:s(Q[n],e.rules[n])}),e.hasOwnProperty("message")){var t=e.message[n],r=e.error[n].message;e.error[n].message=t||r}}),delete e.message})}function f(e){e.forEach(function(e){w.extend(e,{input:F.formElement[e.input]})})}function d(e){e.forEach(function(e,n){w.extend(e,{id:n})})}function m(e,n,t){I.hasOwnProperty(e)?console.warn("Method '"+e+"' has already been defined."):(I[e]=n,Q[e]=t?t:"")}function h(e){e.forEach(function(e){var n=w.isNodeList(e.input)?e.input[0]:e.input;b(n)})}function v(e){var n=e;return{add:function(e){B[n].push(e)},remove:function(t){B[e]=B[n].filter(function(e){return e.id!==t.id})},isItemInQueue:function(e){var t=B[n].filter(function(n){return n.id===e.id});return 1===t.length}}}function p(e,n){var t=document.querySelector("#error-mgn-"+e);w.html(t,n),t.style.display="block"}function g(e){var n=document.querySelector("#error-mgn-"+e);n.style.display="none"}function y(e){return w.isNodeList(e.input)?e.input:e.input.value}function b(e){var n,t=O(e)[0],r=t.rules,i=v("errorQueue");n=Object.keys(r),n.forEach(function(e){var n,o=w.isBoolean(r[e]),u=o?null:r[e],a=y(t);if(!w.isFunction(I[e]))throw' "'+e+'" is not a valid rule.';if(n=I[e],r[e]&&n(a,u,F.formElement)){t.error[e].isValid=!0;var c=t.error,s=Object.keys(c).map(function(e){return c[e].isValid}),l=0===s.filter(function(e){return!e}).length;i.isItemInQueue(t)&&l&&(i.remove(t),g(t.id))}else t.error[e].isValid=!1,i.isItemInQueue(t)?p(t.id,t.error[e].message):(i.add(t),p(t.id,t.error[e].message))})}function O(e){return B.validateObjects.filter(function(n){return w.isNodeList(n.input)?n.input[0].name===e.name:n.input.name===e.name})}function E(e){return e.filter(function(e){return e.required})}function j(e){return e.filter(function(e){var n=y(e);return I.required(n)})}function N(e){var n,t,r;e.forEach(function(e){r={type:"div",attr:{class:"error-message",id:"error-mgn-"+e.id,style:"display:none"}},n=w.createNode(r),w.isNodeList(e.input)?(t=[].concat(_toConsumableArray(e.input)).reverse()[0],t.parentNode.appendChild(n)):e.input.parentNode.appendChild(n)})}function L(e){if(w.isNodeList(e)){for(var n=0;n<e.length;++n)if(e[n].checked)return!0;return!1}return!(0===e.length||""==e.trim()||null==e)}function q(e){return!isNaN(parseFloat(e))&&isFinite(e)}function A(e){return/^[a-z]+$/i.test(e)}function C(e,n){return w.isNodeList(e)?w.getCheckedValues(e).length<=n:e.length<=n}function P(e,n){return w.isNodeList(e)?w.getCheckedValues(e).length>=n:e.length>=n}function S(e,n,t){var r=t[n];return e===r.value}function x(e){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)}function k(){var e={},n=Object.prototype,t=n.toString;return e.createNode=function(e){var n=e.type,t=e.attr,r=e.content,i=document.createElement(n);return t&&Object.keys(t).forEach(function(e){i.setAttribute(e,t[e])}),r&&r.forEach(function(e){"string"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(e)}),i},e.extend=function(e,n){var t;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},e.insertAfter=function(e,n){n.parentNode.insertBefore(e,n.nextSibling)},e.html=function(e,n){e.innerHTML=n},e.removeNode=function(e){e.parentNode.removeChild(e)},e.exists=function(e){return document.querySelectorAll(e).length>0},e.isBoolean=function(e){return"[object Boolean]"===t.call(e)},e.isNodeList=function(e){return"[object RadioNodeList]"===t.call(e)},e.isObject=function(e){return"[object Object]"===t.call(e)},e.isFunction=function(e){return"[object Function]"===t.call(e)},e.isString=function(e){return"[object String]"===t.call(e)},e.getCheckedValues=function(e){return[].concat(_toConsumableArray(e)).filter(function(e){return e.checked}).map(function(e){return e.value})},e}var w=k(),V={onSuccess:null,formElement:null,preventSubmit:!1,validateOnChange:!0,resetFormOnSubmit:!0},F={},I={email:x,digits:q,equalTo:S,lettersOnly:A,required:L,maxLength:C,minLength:P},Q={lettersOnly:"Please use letters only.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",required:"This field is required.",minLength:"Please enter a minimum of {0} characters.",maxLength:"Please enter a maximum of {0} characters."},B={validateObjects:null,errorQueue:[]},M={validate:t,addMethod:m};return n(e),M};