"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}var validateManager=function(e){function n(e){if(!k.isObject(e))throw"Please provide a valid object with config options to validateManager";Q=k.extend(I,e)}function r(){Q.formElement=document.forms[Q.formElement];for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];T.validateObjects=t(n),P(T.validateObjects),i()}function t(e){var n=[m,d,l,f];return n.forEach(function(n){n(e)}),e}function i(){Q.validateOnChange&&Q.formElement.addEventListener("change",o,!1),Q.formElement.addEventListener("submit",u,!1)}function o(e){e.preventDefault(),b(e.target)}function u(e){e.preventDefault();var n=E(T.validateObjects),r=j(n),t=0===T.errorQueue.length,i=r.length===n.length;if(i&&t){var o=a(T.validateObjects);k.isFunction(Q.onSuccess)&&Q.onSuccess(o),Q.resetFormOnSubmit&&Q.formElement.reset(),!Q.preventSubmit&&Q.formElement.submit()}else h(n)}function a(e){var n;return e.reduce(function(e,r){return n=r.input.name||r.input[0].name,e[n]=r.input.value,e},{})}function c(){return{get:function(e){return M[e]},add:function(e,n){M[e]=n}}}function l(e){var n,r;e.forEach(function(e){n=e.hasOwnProperty("rules"),r=e.hasOwnProperty("required")&&e.required,n&&r?k.extend(e.rules,{required:!0}):!n&&r&&k.extend(e,{rules:{required:!0}})})}function s(e,n){var r=String.prototype.split.call(e," "),t=r.indexOf("{0}");return r[t]=n,r.join(" ")}function f(e){var n=c();e.forEach(function(e){var r=Object.keys(e.rules);e.error=e.error||{},r.forEach(function(r){!e.error.hasOwnProperty(r)&&k.isBoolean(e.rules[r])?e.error[r]={isValid:null,message:n.get(r)}:e.error.hasOwnProperty(r)||(e.error[r]={isValid:null,message:s(n.get(r),e.rules[r])}),e.hasOwnProperty("message")&&(e.error[r].message=e.message[r])}),delete e.message}),console.log("error added: ",e)}function d(e){e.forEach(function(e){k.extend(e,{input:Q.formElement[e.input]})})}function m(e){e.forEach(function(e,n){k.extend(e,{id:n})})}function v(e,n,r){B.hasOwnProperty(e)?console.warn("Method '"+e+"' has already been defined."):(B[e]=n,r&&c().add(e,r))}function h(e){e.forEach(function(e){b(e.input)})}function g(e){var n=e;return{add:function(e){T[n].push(e)},remove:function(r){T[e]=T[n].filter(function(e){return e.id!==r.id})},isItemInQueue:function(e){var r=T[n].filter(function(n){return n.id===e.id});return 1===r.length}}}function p(e,n){var r=document.querySelector("#error-mgn-"+e);k.html(r,n),r.style.display="block"}function y(e){var n=document.querySelector("#error-mgn-"+e);n.style.display="none"}function b(e){var n,r=O(e.name)[0],t=r.rules,i=g("errorQueue");n=Object.keys(t),n.forEach(function(n){var o,u=k.isBoolean(t[n]),a=u?null:t[n],c="radio"===n?r.input:e.value;if(!k.isFunction(B[n]))throw' "'+n+'" is not a valid rule.';if(o=B[n],t[n]&&o(c,a,Q.formElement)){r.error[n].isValid=!0;var l=r.error,s=Object.keys(l).map(function(e){return l[e].isValid}),f=0===s.filter(function(e){return!e}).length;i.isItemInQueue(r)&&f&&(i.remove(r),y(r.id))}else r.error[n].isValid=!1,i.isItemInQueue(r)?p(r.id,r.error[n].message):(i.add(r),p(r.id,r.error[n].message))})}function O(e){return T.validateObjects.filter(function(n){return k.isRadioList(n.input)?n.input[0].name===e:n.input.name===e})}function E(e){return e.filter(function(e){return e.required})}function j(e){return e.filter(function(e){return B.required(e.input.value)})}function P(e){var n,r,t;e.forEach(function(e){t={type:"div",attr:{class:"error-message",id:"error-mgn-"+e.id,style:"display:none"}},n=k.createNode(t),e.rules&&e.rules.radio?(r=[].concat(_toConsumableArray(e.input)).reverse()[0],k.insertAfter(n,r)):k.insertAfter(n,e.input)})}function S(e){return!(0===e.length||""==e.trim()||null==e)}function q(e){return!isNaN(parseFloat(e))&&isFinite(e)}function A(e){return/^[a-z]+$/i.test(e)}function x(e,n){return e.length<=n}function w(e,n){return e.length>=n}function L(e,n,r){var t=r[n];return e===t.value}function N(e){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)}function F(e){for(var n=0;n<e.length;++n)if(e[n].checked)return!0;return!1}function C(){var e={},n=Object.prototype,r=n.toString;return e.insertAfter=function(e,n){n.parentNode.insertBefore(e,n.nextSibling)},e.html=function(e,n){e.innerHTML=n},e.removeNode=function(e){e.parentNode.removeChild(e)},e.exists=function(e){return document.querySelectorAll(e).length>0},e.isBoolean=function(e){return"[object Boolean]"===r.call(e)},e.isRadioList=function(e){return"[object RadioNodeList]"===r.call(e)},e.isObject=function(e){return"[object Object]"===r.call(e)},e.isFunction=function(e){return"[object Function]"===r.call(e)},e.isString=function(e){return"[object String]"===r.call(e)},e.createNode=function(e){var n=e.type,r=e.attr,t=e.content,i=document.createElement(n);return r&&Object.keys(r).forEach(function(e){i.setAttribute(e,r[e])}),t&&t.forEach(function(e){"string"==typeof e?i.appendChild(document.createTextNode(e)):i.appendChild(e)}),i},e.extend=function(e,n){var r;for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e},e}var k=C(),I={onSuccess:null,formElement:null,preventSubmit:!1,validateOnChange:!0,resetFormOnSubmit:!0},Q={},B={radio:F,email:N,digits:q,equalTo:L,lettersOnly:A,required:S,maxLength:x,minLength:w},M={lettersOnly:"Please use letters only.",radio:"Please select an option.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",required:"This field is required.",minLength:"Please enter a minimum of {0} characters.",maxLength:"Please enter a maximum of {0} characters."},T={validateObjects:null,errorQueue:[]},V={validate:r,addMethod:v};return n(e),V};