"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(e,t){function n(e){var t={onSubmitHandler:null,onChangeHandler:null,formElement:null,validateOnChange:!0,resetFormOnSubmit:!0};this.errorMessages={lettersOnly:"Please use letters only.",email:"Please enter a valid email address.",equalTo:"Please enter the same value.",digits:"Please enter a valid digit.",range:"Please enter a number between {0} and {1}",required:"This field is required.",minLength:"Please enter a minimum of {0} characters.",maxLength:"Please enter a maximum of {0} characters."},this.form={validationList:[],errorCollection:[]},this.validationMethods=g.call(this),this.listeners={},this.listeners.onChangeHandler=i.bind(this),this.listeners.onSubmitHandler=o.bind(this),C.isObject(e)&&(this.options=C.extend(t,e))}function r(){this.options.validateOnChange&&this.options.formElement.addEventListener("change",this.listeners.onChangeHandler,!1),this.options.formElement&&this.options.formElement.addEventListener("submit",this.listeners.onSubmitHandler,!1)}function i(e){e.preventDefault(),u.call(this,e.target),C.isFunction(this.options.onChangeHandler)&&this.options.onChangeHandler(e,e.target,this.options.formElement)}function o(e){var t=this;e.preventDefault(),s.call(this,function(n){C.isFunction(t.options.onSubmitHandler)&&t.options.onSubmitHandler(e,n,t.options.formElement),t.options.resetFormOnSubmit&&t.options.formElement.reset()})}function l(){return this.form.validationList.reduce(function(e,t){return e[t.fieldName]=C.isNodeList(t.element)?C.getCheckedValues(t.element):t.element.value,e},{})}function a(){return this.form.validationList.filter(function(e){return y.call(e.rules,"required")}).map(function(e){return e.element})}function s(e){var t=this;a.call(this).forEach(function(e){u.call(t,e)});var n=d.call(this);n.isErrorCollectionEmpty.call(this)&&C.isFunction(e)&&e(l.call(this),n)}function u(e){var t=this,n=C.first(this.form.validationList.filter(function(t){var n=C.isNodeList(e)?e[0].name:e.name;return t.fieldName===n})),r=d(),i=Object.keys(n.rules);i.some(function(e){var i=t.validationMethods[e],o=C.isNodeList(n.element)?n.element:n.element.value,l=C.isBoolean(n.rules[e])?void 0:n.rules[e];if(!C.isFunction(i))throw new Error(' "'+e+'" is not a valid rule.');var a=n.rules[e]&&i(o,l,t.options.formElement);return a?r.remove.apply(t,[e,n]):r.add.apply(t,[e,n]),r.isErrorInCollection.apply(t,[e,n])?c(n.id,n.error[e]):r.isErrorInCollection.apply(t,[e,n,!1])||f(n.id),!a})}function c(e,n){var r=t.querySelector("#error-mgn-"+e);C.html(r,n),r.style.display="block"}function f(e){t.querySelector("#error-mgn-"+e).style.display="none"}function d(){function e(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2],r=this.form.errorCollection.filter(function(r){return n?r.id===t.id&&e===r.rule:r.id===t.id});return r.length>0}function t(){return 0===this.form.errorCollection.length}function n(){return this.form.errorCollection}function r(t,n){e.apply(this,[t,n])||this.form.errorCollection.push({id:n.id,rule:t,message:n.error[t]})}function i(t,n){e.apply(this,[t,n])&&(this.form.errorCollection=this.form.errorCollection.filter(function(e){return n.id!==e.id&&t===e.rule}))}return{add:r,remove:i,isErrorInCollection:e,isErrorCollectionEmpty:t,getInvalid:n}}function h(e){function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.replace(/{(.*?)}/g,function(e,t){return n=Array.isArray(n[t])?C.flatten(n):n,n[t]})}var n=this;return e.map(function(e,t){return C.extend(e,{id:t})}).map(function(e){return C.extend(e,{element:n.options.formElement[e.fieldName]})}).map(function(e){var t=y.call(e,"rules"),n=y.call(e,"required");return t||(e.rules={}),n&&C.extend(e.rules,{required:!0}),e}).map(function(e){var r=Object.keys(e.rules);return e.error={},r.forEach(function(r){y.call(e.error,r)||(e.error[r]=C.isBoolean(e.rules[r])?n.errorMessages[r]:t(n.errorMessages[r],e.rules[r])),y.call(e,"message")&&e.message[r]&&(e.error[r]=e.message[r])}),delete e.message,delete e.required,e})}function m(){this.form.validationList.forEach(function(e){var n=t.createElement("div");if(n.className="error-message",n.id="error-mgn-"+e.id,n.style.display="none",C.isNodeList(e.element)){var r=e.element[e.element.length-1];r.parentNode.appendChild(n)}else e.element.parentNode.appendChild(n)})}function g(){return{required:function(e){if(C.isNodeList(e)){for(var t=0;t<e.length;++t)if(e[t].checked)return!0;return!1}return!(0===e.length||""===e.trim()||null===e)},range:function(e,t){return parseInt(e)>=t[0]&&parseInt(e)<=t[1]},digits:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},lettersOnly:function(e){return/^[a-z]+$/i.test(e)},maxLength:function(e,t){return C.isNodeList(e)?C.getCheckedValues(e).length<=t:e.length<=t},minLength:function(e,t){return C.isNodeList(e)?C.getCheckedValues(e).length>=t:e.length>=t},equalTo:function(e,t,n){var r=n[t];return e===r.value},email:function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}}}var v=Object.prototype,p=v.toString,y=v.hasOwnProperty,C={extend:function(e,t){for(var n in t)y.call(t,n)&&(e[n]=t[n]);return e},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},html:function(e,t){e.innerHTML=t},removeNode:function(e){e.parentNode.removeChild(e)},exists:function(e){return t.querySelectorAll(e).length>0},isBoolean:function(e){return"[object Boolean]"===p.call(e)},isNodeList:function(e){return"[object RadioNodeList]"===p.call(e)},isObject:function(e){return"[object Object]"===p.call(e)},isFunction:function(e){return"[object Function]"===p.call(e)},isString:function(e){return"[object String]"===p.call(e)},getCheckedValues:function(e){return[].concat(_toConsumableArray(e)).filter(function(e){return e.checked}).map(function(e){return e.value})},first:function(e){return e.length>0?e[0]:e},flatten:function(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}};n.prototype={validate:function(){if(!t.forms[this.options.formElement])throw new Error('Could not find a form element with the name "'+this.options.formElement+'"');this.options.formElement=t.forms[this.options.formElement];for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.form.validationList=h.call(this,C.flatten(n)),m.call(this),r.call(this)},addMethod:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];if(y.call(this.validationMethods,e))throw new Error("Method '"+e+"' is already use.");this.validationMethods[e]=t,this.errorMessages[e]=n},valid:function(){var e=!1;return s.call(this,function(){e=!0}),e},getInvalidList:function(){return this.valid(),d.call(this).getInvalid.call(this)},getInvalidCount:function(){return this.getInvalidList.call(this).length}},e.ValidateManager=e.ValidateManager||n}(window,document);